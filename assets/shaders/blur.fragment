#version 450
out vec4 FragColor;

in vec2 TexCoords;

uniform sampler2D image;
uniform int radius;

void main() {
	vec2 tex_offset = 1.0 / textureSize(image, 0); // gets size of single texel
	vec4 result = vec4(0); // current fragment's contribution
	
	int r = radius;

	for(int j = -r; j < r; ++j) {
		for(int i = -r; i < r; ++i) {
			result += texture(image, TexCoords + tex_offset * vec2(i, j));
		}
	}
	FragColor = vec4(result / (r * r));
}